/*

	CWORD JavaScript Crossword Engine

	Copyright (C) 2007-2010 Pavel Simakov
	http://www.softwaresecretweapons.com/jspwiki/cword

	This library is free software; you can redistribute it and/or
	modify it under the terms of the GNU Lesser General Public
	License as published by the Free Software Foundation; either
	version 2.1 of the License, or (at your option) any later version.

	This library is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
	Lesser General Public License for more details.

	You should have received a copy of the GNU Lesser General Public
	License along with this library; if not, write to the Free Software
	Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA

*/
function oyCrosswordFooter(e){this.puzz=e}function oyGridElementCache(e,t,o){this.ns=o,this.cache=new Array;for(var i=0;t>i;i++)for(var n=0;e>n;n++){var r;r=this.ns+n+"_"+i,this.cache[r]=document.getElementById(r)}}function oyShowLayer(e){ie4&&(document.all[e].style.visibility="visible",document.all[e].style.display="block"),ns4&&(document.layers[e].visibility="show"),ns6&&(document.getElementById([e]).style.visibility="visible",document.getElementById([e]).style.display="block")}function oyHideLayer(e){ie4&&(document.all[e].style.visibility="hidden",document.all[e].style.display="none"),ns4&&(document.layers[e].visibility="hide"),ns6&&(document.getElementById([e]).style.visibility="hidden",document.getElementById([e]).style.display="none")}function oySetCookie(e,t,o,i,n,r){document.cookie=e+"="+escape(t)+(o?"; expires="+o.toGMTString():"")+(i?"; path="+i:"")+(n?"; domain="+n:"")+(r?"; secure":"")}function oyGetCookie(e){var t=document.cookie,o=e+"=",i=t.indexOf("; "+o);if(-1==i){if(i=t.indexOf(o),0!=i)return null}else i+=2;var n=document.cookie.indexOf(";",i);return-1==n&&(n=t.length),unescape(t.substring(i+o.length,n))}function oySetCookieForPeriod(e,t,o,i,n,r){var s=new Date;s.setTime(s.getTime()+o),oySetCookie(e,t,s,i,n,r)}function oyBrowserDetection(){this.agt=navigator.userAgent.toLowerCase(),this.browser="",this.version=0,this.compleVersion=0,this.isIE=!1,this.isNetscape=!1,this.isFirefox=!1,this.isGood=!1,this.sf=!1,this.isWin=-1!=this.agt.indexOf("win")||-1!=this.agt.indexOf("16bit"),this.isMac=-1!=this.agt.indexOf("mac"),this.isLinux=-1!=this.agt.indexOf("linux"),-1!=navigator.userAgent.indexOf("MSIE")&&-1==navigator.userAgent.indexOf("AOL")?(this.browser="IE",this.isIE=!0,reg=/(MSIE)(.)(\d+)(.)(\d+)/i,ar=reg.exec(navigator.userAgent),this.version=ar[3],this.compleVersion=ar[3]+ar[4]+ar[5]):-1!=navigator.userAgent.indexOf("Firefox")?(this.browser="Firefox",this.isFirefox=!0,reg=/(Firefox)(.)(\d+)(.)(\d+)/i,ar=reg.exec(navigator.userAgent),this.version=ar[3],this.compleVersion=ar[3]+ar[4]+ar[5]):-1!=navigator.userAgent.indexOf("Netscape")?(this.browser="Netscape",this.isNetscape=!0,reg=/(Netscape)(.)(\d+)(.)(\d+)/i,ar=reg.exec(navigator.userAgent),this.version=ar[3],this.compleVersion=ar[3]+ar[4]+ar[5]):-1!=navigator.userAgent.indexOf("Safari")&&(this.sf=!0),"Netscape"!=this.browser&&(this.isGood=!0)}function oygBind(e){var t=(new oyBrowserDetection).isGood;if(!t){var o="Your current browser is not ideal for accessing this site.\nWe support Microsoft IE 6.0+, Firefox 1.0+, Netscape6.0+ versions.\n\nIt might still work OK, do you want to try?";confirm(o)&&(t=!0)}if(t){var i=document.getElementById("oygContext");if(null==i)oygError="Bad template file.";else{var n=document.getElementById("oygPuzzle");null==n?oygError="Failed to load puzzle file.":(e.init(),e.render(),e.menu.installWelcomeMenu())}}else oygError="This browser is not supported."}function oygNextRandomInt(){var e=""+Math.random(),t=e.indexOf(".");return e.substring(t+1)}oyCrosswordFooter.prototype.bind=function(){var e=this;this.clockTime=setInterval(function(){e.clockUpdate()},1e3)},oyCrosswordFooter.prototype.unbind=function(){clearInterval(this.clockTime),this.clockTime=null},oyCrosswordFooter.prototype.stateOk=function(e){var t=document.getElementById("oygState");t.innerHTML="<b>&gt;</b> "+e+"&nbsp;",t.className="ousStateOk"},oyCrosswordFooter.prototype.stateBusy=function(e){var t=document.getElementById("oygState");t.innerHTML="<b>&gt;</b> "+e+"&nbsp;",t.className="ousStateBusy"},oyCrosswordFooter.prototype.stateError=function(e){var t=document.getElementById("oygState");t.innerHTML="<b>&gt;</b> "+e+"&nbsp;",t.className="ousStateError"},oyCrosswordFooter.prototype.clockUpdate=function(){var e=function(e){return 10>e&&(e="0"+e),e};if(this.puzz.started){var t=(new Date).getTime()-this.puzz.menu.startOn.getTime(),o=Math.round(t/1e3),i=0;o>=60&&(i=Math.round(o/60),o%=60),document.getElementById("oygFooterClock").innerHTML="&nbsp;Time: <b>"+e(i)+"</b>:<b>"+e(o)+"</b>"}},oyCrosswordFooter.prototype.update=function(){var e="";this.puzz.started?(e+="Score: <b>"+this.puzz.menu.score,-1!=this.puzz.menu.rank&&(e+=" (rank <b>"+this.puzz.menu.rank+"</b>)")):e+="Game has not yet started!",document.getElementById("oygFooterStatus").innerHTML=e},oyGridElementCache.prototype.getElement=function(e,t){return this.cache[this.ns+e+"_"+t]};var ie4=document.all?!0:!1,ns4=document.layers?!0:!1,ns6=document.getElementById&&!document.all?!0:!1;oygInit=!0,oygError=null;